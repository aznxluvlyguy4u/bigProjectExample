{% extends 'base.html.twig' %}

{% block body %}

    {% set doubleSpace = '&nbsp; &nbsp;' %}

    {% set counter = 0 %}
    {% set rowsPerPage = 31 %}
    {% set ewesCount = variables.ewes|length %}
    {% set imagesDirectory = variables.imagesDirectory ~ '/nsfo-logo.png' %}
    {% set coefficientDecimalAccuracy = 1 %}

    {% set hasRam2 = variables.hasRam2 %}
    {% set hasRam3 = variables.hasRam3 %}
    {% set hasRam4 = variables.hasRam4 %}
    {% set hasRam5 = variables.hasRam5 %}

    {# HEADER #}

    {% embed "/Report/inbreeding_coefficient_report_parts/header.html.twig" with variables %}
    {% endembed %}

    {# END OF HEADER #}

    {% for key,value in variables.ewes %}

     {#SET VALUES #}

        {% set uln = key %}
        {% set ewe = value %}

        {% if ewe['pedigree'] is defined %}
            {% set ewePedigree = ewe.pedigree %}
        {% else %}
            {% set ewePedigree = '' %}
        {% endif %}

        {% if ewe['inbreedingCoefficient'] is defined %}
            {% set eweInbreedingCoefficient1 = ewe.inbreedingCoefficient.1 * 100 %}

            {% if hasRam2 %}
                {% set eweInbreedingCoefficient2 = ewe.inbreedingCoefficient.2 * 100 %}
            {% endif %}

            {% if hasRam3 %}
                {% set eweInbreedingCoefficient3 = ewe.inbreedingCoefficient.3 * 100 %}
            {% endif %}

            {% if hasRam4 %}
                {% set eweInbreedingCoefficient4 = ewe.inbreedingCoefficient.4 * 100 %}
            {% endif %}

            {% if hasRam5 %}
                {% set eweInbreedingCoefficient5 = ewe.inbreedingCoefficient.5 * 100 %}
            {% endif %}

        {% else %}
            {% set eweInbreedingCoefficient1 = '' %}
        {% endif %}

        {% if counter is divisible by (rowsPerPage) %}



         {#COLUMN HEADER #}
            {% if ewesCount - counter <= rowsPerPage %}
                <table class="single-table">
            {% elseif counter is divisible by(2*rowsPerPage) %}
                <table class="table-one">
            {% elseif counter is divisible by (rowsPerPage) %}
                <table class="table-two">
            {% endif %}

            <tr>
                <td class="tg-yw4l">Ooi ULN</td>
                <td class="tg-yw4l">Ooi STN</td>
                <td class="tg-lqy6">Ram 1</td>
                {% if hasRam2 %}
                    <td class="tg-lqy6">Ram 2</td>
                {% endif %}
                {% if hasRam3 %}
                    <td class="tg-lqy6">Ram 3</td>
                {% endif %}
                {% if hasRam4 %}
                    <td class="tg-lqy6">Ram 4</td>
                {% endif %}
                {% if hasRam5 %}
                    <td class="tg-lqy6">Ram 5</td>
                {% endif %}
            </tr>
        {% endif %}

         {#ROW DATA #}

            <tr>
                <td class="tg-yw4l">{{ uln }}</td>
                <td class="tg-yw4l">{{ ewePedigree }}</td>
                <td class="tg-lqy6-values">{{ eweInbreedingCoefficient1|number_format(coefficientDecimalAccuracy,'.',',') }}%</td>
                {% if hasRam2 %}
                    <td class="tg-lqy6-values">{{ eweInbreedingCoefficient2|number_format(coefficientDecimalAccuracy,'.',',') }}%</td>
                {% endif %}
                {% if hasRam3 %}
                    <td class="tg-lqy6-values">{{ eweInbreedingCoefficient3|number_format(coefficientDecimalAccuracy,'.',',') }}%</td>
                {% endif %}
                {% if hasRam4 %}
                    <td class="tg-lqy6-values">{{ eweInbreedingCoefficient4|number_format(coefficientDecimalAccuracy,'.',',') }}%</td>
                {% endif %}
                {% if hasRam5 %}
                    <td class="tg-lqy6-values">{{ eweInbreedingCoefficient5|number_format(coefficientDecimalAccuracy,'.',',') }}%</td>
                {% endif %}

            </tr>

        {% set counter = counter + 1 %}

         {#END OF TABLE#}
        {% if (counter is divisible by (rowsPerPage)) or (loop.last == true) %}
            </table>
                </div>
        {% endif %}

     {#BREAK TO NEW PAGE: WITH HEADER ON NEW PAGE#}

        {% if counter is divisible by (rowsPerPage * 2) and loop.last == false %}

            {#necessary to enforce a pagebreak using css#}
        <footer></footer>

        {% embed "/Report/inbreeding_coefficient_report_parts/title_and_rams.html.twig" with variables %}
        {% endembed %}

        {% endif %}

    {% endfor %}

{% endblock %}

{% block stylesheets %}

    <style type="text/css">
        h2 { text-align: center; font-family:SansSerif, sans-serif;font-size:22px }
        p { text-align: center; font-family:SansSerif, sans-serif;font-size:14px; margin-bottom: 18px}

        .nsfo-logo {
            margin-top: 1.0cm;
            margin-bottom: 0.5cm;
            text-align: center;
            align-content: center;
        }

        .nsfo-logo img {
            height: 50px;
        }

        table, td {
            border-collapse:collapse;
            border-spacing:0;
            border-style:solid;
            border-width:1px;
            font-size: 14px;
        }

        table.table-one {
            float: left;
            margin-left: 80px;
        }

        table.table-two {
            float: right;
            margin-right: 80px;
        }

        td {
            padding: 6px;
        }

        /* this centers the table on the page */
        .single-table {
            /*float: left;*/
            /*display: inline-block;*/
            margin:0px auto;
        }

        .rams-table  {
            border-collapse:collapse;
            border-spacing:0;
            margin:0px auto 10px;
        }
        .rams-table td{
            border-color:black;
            border-style:solid;
            border-width:1px;
            font-family:Arial, sans-serif;
            font-size:14px;
            overflow:hidden;
            padding:2px 10px;
            word-break:normal;
        }
        .rams-table th{
            border-color:black;
            border-style:solid;
            border-width:1px;
            font-family:Arial, sans-serif;
            font-size:14px;
            font-weight:normal;
            overflow:hidden;
            padding:2px 10px;
            word-break:normal;
        }
        .rams-table .rams-table-zv4m{
            border-color:#ffffff;
            text-align:left;
            vertical-align:top
        }
        .rams-table .rams-table-zv4k{
            border-color:#ffffff;
            text-align:center;
            vertical-align:top;
        }

        .tg td{font-family:SansSerif, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
        .tg th{font-family:SansSerif, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}

        .tg-lqy6{
            text-align:right;
            vertical-align:center;
        }
        .tg-lqy6-values{
            text-align:right;
            vertical-align:center;
        }

        .tg .tg-ddb2{font-family:serif !important;;text-align:center;vertical-align:top}
        .tg .tg-yw4l{vertical-align:top}
        @media screen and (max-width: 767px) {
            .tg {width: auto !important;}
            .tg col {width: auto !important;}
            .tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;}
        }

        /* Always insert a page break after each <footer> element (when printing) */
        @media print {
            footer {page-break-after: always;}
        }

    </style>

{% endblock %}
